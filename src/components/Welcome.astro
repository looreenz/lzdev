---
import { data } from "../data/es";
const CtaIcon = data.welcome.ctaIcon;
const GitHubIcon = data.welcome.socialLinks.github.icon;
const gitHubUrl = data.welcome.socialLinks.github.url;
const LinkedInIcon = data.welcome.socialLinks.linkedin.icon;
const linkedInUrl = data.welcome.socialLinks.linkedin.url;
---

<div id="container">
  <main
    id="welcome"
    class="flex flex-col md:flex-row items-center justify-center min-h-screen gap-30 p-5 max-w-4xl mx-auto"
  >
    <section
      class="flex flex-col items-center md:items-start text-center md:text-left gap-2"
    >
      <p id="greeting" class="text-2xl">{data.welcome.greet}</p>
      <h1 id="heading" class="title">{data.welcome.title}</h1>
      <p id="subheading" class="text-xl">{data.welcome.subtitle}</p>
      <div class="flex gap-3 items-center mt-8">
        <button
          id="contact-button"
          class="flex gap-3 items-center cursor-pointer hover:bg-orange-400/40 border border-orange-400 text-light text-lg px-4 py-2 rounded-full transition-colors duration-300"
        >
          {data.welcome.ctaText}
          <CtaIcon class="size-6" />
        </button>
        <a href={gitHubUrl} target="_blank" rel="noopener noreferrer">
          <GitHubIcon
            class="social-icon size-7 text-light hover:text-orange-400 transition-colors duration-300"
          />
        </a>
        <a href={linkedInUrl} target="_blank" rel="noopener noreferrer">
          <LinkedInIcon
            class="social-icon size-7 text-light hover:text-orange-400 transition-colors duration-300"
          />
        </a>
      </div>
    </section>
    <div
      id="memoji-container"
      class="relative h-80 w-auto flex justify-center items-center"
    >
      {/* Fondo blur naranja */}
      <div
        class="absolute top-0 left-1/2 transform -translate-x-1/2 w-full h-full rounded-full"
        style={{
          background:
            "radial-gradient(circle, rgba(255,140,0,0.6) 0%, rgba(255,140,0,0) 70%)",
          filter: "blur(60px)",
        }}
      >
      </div>

      {/* Imagen del Memoji */}
      <img
        src={data.welcome.image}
        alt="avatar"
        class="relative h-80 w-auto mask-b-from-70%"
      />
    </div>
  </main>
</div>

<script>
  import { gsap } from "gsap";

  // Nos aseguramos de que el DOM esté completamente cargado
  document.addEventListener("DOMContentLoaded", () => {
    // Creamos una línea de tiempo para las animaciones de entrada
    const tl = gsap.timeline();

    // Animamos los elementos de la sección de texto
    tl.from("#greeting", {
      opacity: 0,
      y: 20,
      duration: 0.6,
      ease: "power3.out",
    })
      .from(
        "#heading",
        {
          opacity: 0,
          y: 20,
          duration: 0.6,
          ease: "power3.out",
        },
        "-=0.4" // Se inicia 0.4s antes de que termine la anterior
      )
      .from(
        "#subheading",
        {
          opacity: 0,
          y: 20,
          duration: 0.6,
          ease: "power3.out",
        },
        "-=0.4"
      )
      .from(
        "#contact-button",
        {
          opacity: 0,
          scale: 0.9,
          duration: 0.5,
          ease: "back.out(1.7)",
        },
        "-=0.3"
      )
      .from(
        ".social-icon",
        {
          opacity: 0,
          y: 20,
          duration: 0.5,
          ease: "power3.out",
          stagger: 0.2,
        },
        "-=0.2"
      );

    // Animamos la imagen y su fondo
    gsap.from("#memoji-container", {
      opacity: 0,
      scale: 0.8,
      duration: 1,
      delay: 0.5, // Empieza con un pequeño retraso
      ease: "elastic.out(1, 0.75)",
    });
  });
</script>
