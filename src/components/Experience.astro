---
// No se necesitan cambios aquí
---

<section
  id="experience-section"
  class="flex flex-col justify-center items-center gap-10 p-5 min-h-screen w-full mx-auto"
>
  <h2 class="title text-4xl font-bold text-white" id="experience-title">
    Experiencia
  </h2>

  {/* Contenedor principal de la timeline */}
  <div
    id="timeline"
    class="relative mt-5 w-full max-w-3xl mx-auto flex flex-col gap-12
           before:content-[''] before:absolute before:top-2 before:left-4 md:before:left-1/2 before:w-0.5 before:h-full before:bg-orange-400/50"
  >
    {/* -- Primer elemento de la timeline (a la derecha en escritorio) -- */}
    <div
      class="timeline-item relative pl-12 md:pl-0
             before:content-[''] before:absolute before:top-2 before:left-4 md:before:left-1/2 before:-translate-x-1/2 before:w-4 before:h-4 before:bg-orange-500 before:rounded-full before:border-2 before:border-gray-900"
    >
      {/* Contenedor del contenido, posicionado a la derecha */}
      <div class="md:w-1/2 md:mr-auto md:text-right md:pr-12">
        <h3 class="timeline-title text-2xl font-semibold text-white">
          Desarrollador Web
        </h3>
        <h4 class="timeline-subtitle text-xl font-semibold text-gray-200">
          Huming Music SL
        </h4>
        <p class="timeline-date italic text-orange-300/80 mt-1">
          Junio 2025 - Presente
        </p>
        <ul
          class="timeline-content list-none list-inside mt-2 space-y-1 text-gray-300"
        >
          <li>
            Desarrollo de plataforma marketplace para artistas emergentes.
          </li>
          <li>
            Desarrollo de plataforma dashboard para artistas, promotores y
            agencias.
          </li>
          <li>
            Optimización de performace y SEO utilizando mejores prácticas,
            desarrollando en Next.js, Tailwindcss y GCS con CI/CD.
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  // --- NUEVA ANIMACIÓN PARA EL TÍTULO ---
  gsap.from("#experience-title", {
    opacity: 0,
    y: 50, // Se desplaza 50px hacia arriba
    duration: 1,
    ease: "power3.out",
    scrollTrigger: {
      trigger: "#experience-section", // El trigger es la sección completa
      start: "top 80%", // Empieza cuando el 80% de la ventana llega a la sección
      toggleActions: "play none none reverse", // La animación se revierte al salir
    },
  });

  // Animación para la línea principal de la timeline
  gsap.fromTo(
    "#timeline::before",
    { scaleY: 0, transformOrigin: "top" },
    {
      scaleY: 1,
      duration: 1.5,
      ease: "power2.inOut",
      scrollTrigger: {
        trigger: "#timeline",
        start: "top 80%",
        end: "bottom 80%",
        scrub: 1,
      },
    }
  );

  // Animación para cada elemento de la timeline
  const timelineItems = document.querySelectorAll(".timeline-item");

  timelineItems.forEach((item) => {
    const contentBlock = item.querySelector("div");
    const isRightAlignedOnDesktop =
      contentBlock?.classList.contains("md:mr-auto");

    const xDirection =
      window.innerWidth < 768 ? -30 : isRightAlignedOnDesktop ? -30 : 30;

    gsap.from(contentBlock, {
      scrollTrigger: {
        trigger: item,
        start: "top 85%",
        toggleActions: "play none none reverse",
      },
      x: xDirection,
      opacity: 0,
      duration: 0.8,
      ease: "power2.out",
    });
  });
</script>
